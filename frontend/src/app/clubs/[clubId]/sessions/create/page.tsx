"use client";
import { useState } from 'react'; import { useRouter } from 'next/navigation'; import { apiClient } from '@/lib/api'; import { ProtectedLayout } from '@/components/layout/protected-layout'; import { Navbar } from '@/components/layout/navbar'; import { Card } from '@/components/ui/card'; import { Input } from '@/components/ui/input'; import { Textarea } from '@/components/ui/textarea'; import { Button } from '@/components/ui/button';
export default function CreateSessionPage({ params }: { params: { clubId: string } }){ const [form,setForm]=useState({title:'',description:'',location:'',start_time:'',end_time:'',max_participants:20}); const router=useRouter();
const submit=async(e:React.FormEvent)=>{e.preventDefault(); const payload={...form,start_time:new Date(form.start_time).toISOString(),end_time:new Date(form.end_time).toISOString()}; const s=await apiClient.createSession(params.clubId,payload); router.push(`/clubs/${params.clubId}/sessions/${s.id}`); };
return <ProtectedLayout><Navbar/><main className="mx-auto max-w-xl p-4"><Card><h1 className="mb-4 text-xl font-semibold">Create Session</h1><form onSubmit={submit} className="space-y-3"><Input placeholder="Title" value={form.title} onChange={e=>setForm({...form,title:e.target.value})} required/><Textarea placeholder="Description" value={form.description} onChange={e=>setForm({...form,description:e.target.value})}/><Input placeholder="Location" value={form.location} onChange={e=>setForm({...form,location:e.target.value})} required/><Input type="datetime-local" value={form.start_time} onChange={e=>setForm({...form,start_time:e.target.value})} required/><Input type="datetime-local" value={form.end_time} onChange={e=>setForm({...form,end_time:e.target.value})} required/><Button>Create</Button></form></Card></main></ProtectedLayout>; }
